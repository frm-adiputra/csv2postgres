// Code generated by {{.Generator}} DO NOT EDIT

package {{.PkgVar}}

// Computer implements pipeline.Computer interface.
type Computer struct {
{{- range .ComputeFns}}
    {{.Name}} func ({{.ArgumentType}}) ({{.ReturnType}}, error)
{{- end}}
}

// Compute compute field's values.
func (c Computer) Compute(fields map[string]interface{}) (map[string]interface{}, error) {
{{- range .Fields}}
{{- if .ComputeFn}}
    v{{upperCaseFirst .Name}}, err := c.{{.ComputeFn}}(fields["{{.Name}}"].({{.GoType}}))
    if err != nil {
        return nil, err
    }
    fields["{{.Name}}"] = v{{upperCaseFirst .Name}}
{{- end}}{{end}}

{{- range .ComputedFields}}
    v{{upperCaseFirst .Name}}, err := c.{{.ComputeFn}}(fields)
    if err != nil {
        return nil, err
    }
    fields["{{.Name}}"] = v{{upperCaseFirst .Name}}
{{- end}}
    return fields, nil
}
